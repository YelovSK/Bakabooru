<div class="p-3">
    <h1 class="text-3xl font-bold mb-2 text-accent-primary">Excluded Posts</h1>
    <p class="text-gray-400 mb-6">Files excluded during duplicate resolution. Restoring a file allows it to be
        re-imported on the next library scan.</p>

    <!-- Summary -->
    <div class="mb-6 flex flex-wrap gap-3">
        <div class="flex-1 min-w-[12rem] rounded-lg border border-gray-700 bg-gray-900 px-6 py-4">
            <div class="text-3xl font-bold text-white">{{ files().length }}</div>
            <div class="text-sm text-gray-400">Excluded Files</div>
        </div>
    </div>

    <!-- Loading -->
    @if (loading()) {
    <div class="text-center py-16 text-gray-400">Loading...</div>
    }

    <!-- Empty -->
    @if (!loading() && files().length === 0) {
    <div class="text-center py-16">
        <div class="text-6xl mb-4">âœ“</div>
        <h2 class="text-xl font-semibold text-white mb-2">No excluded files</h2>
        <p class="text-gray-400">No files have been excluded from scanning.</p>
    </div>
    }

    <!-- Table -->
    @if (!loading() && files().length > 0) {
    <div class="overflow-x-auto rounded-lg border border-gray-700">
        <table class="w-full text-sm text-left">
            <thead class="bg-gray-900 text-gray-400 text-xs uppercase tracking-wider">
                <tr>
                    <th class="px-4 py-3">Library</th>
                    <th class="px-4 py-3">Path</th>
                    <th class="px-4 py-3">Reason</th>
                    <th class="px-4 py-3">Excluded</th>
                    <th class="px-4 py-3 text-right">Action</th>
                </tr>
            </thead>
            <tbody>
                @for (file of files(); track file.id) {
                <tr class="border-t border-gray-800 hover:bg-gray-900/50 transition-colors">
                    <td class="px-4 py-3 text-gray-300 whitespace-nowrap">{{ file.libraryName }}</td>
                    <td class="px-4 py-3 text-gray-300 max-w-[24rem] truncate" [title]="file.relativePath">{{
                        file.relativePath }}</td>
                    <td class="px-4 py-3">
                        <span class="bg-gray-700 text-gray-300 px-2 py-0.5 rounded text-xs">{{ file.reason }}</span>
                    </td>
                    <td class="px-4 py-3 text-gray-400 whitespace-nowrap">{{ file.excludedDate | date:'short' }}</td>
                    <td class="px-4 py-3 text-right">
                        <app-button variant="secondary" size="sm" (click)="restore(file)">Restore</app-button>
                    </td>
                </tr>
                }
            </tbody>
        </table>
    </div>
    }
</div>