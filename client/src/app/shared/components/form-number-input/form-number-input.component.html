<div class="w-full">
  @if (label()) {
    <label
      [for]="id()"
      class="inline-block text-[0.85rem] font-medium text-text-muted mb-1.5 ml-1"
    >
      {{ label() }}
    </label>
  }

  <div class="relative">
    <input
      [id]="id()"
      type="number"
      [placeholder]="placeholder()"
      [min]="min()"
      [max]="max()"
      [step]="step()"
      [ngModel]="value"
      (input)="handleInput($event)"
      (blur)="handleBlur()"
      [disabled]="disabled"
      class="w-full px-4 py-2.5 pr-12 bg-glass-bg border rounded-xl text-text-primary text-[0.9rem] outline-none transition-all focus:bg-glass-bg-hover focus:shadow-[0_0_10px_rgba(56,189,248,0.1)] disabled:opacity-50 disabled:cursor-not-allowed placeholder:text-text-dim [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:m-0 [&::-webkit-inner-spin-button]:m-0"
      [class.border-glass-border]="!hasError()"
      [class.border-red-500]="hasError()"
      [class.focus:border-accent-primary]="!hasError()"
      [class.focus:border-red-400]="hasError()"
    />

    <div class="absolute right-1.5 top-1.5 bottom-1.5 w-7 overflow-hidden rounded-md border border-glass-border bg-glass-bg/70 grid grid-rows-2">
      <button
        type="button"
        [disabled]="disabled"
        (click)="stepBy(1)"
        class="appearance-none m-0 p-0 w-full h-full flex items-center justify-center border-b border-glass-border text-text-muted transition-colors hover:bg-glass-bg-hover hover:text-text-primary disabled:cursor-not-allowed disabled:opacity-40 leading-none"
        [attr.aria-label]="'Increase ' + (label() || 'value')"
      >
        <svg viewBox="0 0 24 24" class="h-3 w-3" aria-hidden="true">
          <path d="M7 14l5-5 5 5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </button>
      <button
        type="button"
        [disabled]="disabled"
        (click)="stepBy(-1)"
        class="appearance-none m-0 p-0 w-full h-full flex items-center justify-center text-text-muted transition-colors hover:bg-glass-bg-hover hover:text-text-primary disabled:cursor-not-allowed disabled:opacity-40 leading-none"
        [attr.aria-label]="'Decrease ' + (label() || 'value')"
      >
        <svg viewBox="0 0 24 24" class="h-3 w-3" aria-hidden="true">
          <path d="M7 10l5 5 5-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </button>
    </div>
  </div>

  <app-form-errors [control]="ngControl" [label]="label()"></app-form-errors>
</div>
